videojs.plugin("aoBcTracking",function(e){var n,o,t,i,a,d=!0,c=0,r=0,m="http://metrics.brightcove.com/tracker?",u=encodeURI(window.location.href),v=encodeURI(document.referrer),g={accountID:null,video:{}};t=function(e){return $.get(e),!0},i=function(e,o){var i="",a=o.timeStamp,d=(new Date(parseInt(o.timeStamp)),g.video);i="event="+e+"&domain=videocloud&account="+encodeURI(g.accountID)+"&time="+a+"&destination="+encodeURI(u),""!==v&&(i+="&source="+encodeURI(v)),("video_impression"===e||"video_view"===e||"video_engagement"===e)&&(i+="&video="+encodeURI(d.id)+"&video_name="+encodeURI(d.name)),"video_engagement"===e&&(i+="&video_duration="+n.duration()+"&range="+o.range),i=m+i,t(i)},o=function(e){var n=e.timeStamp,o="";new Date(e.timeStamp),d&&(c=e.timeStamp,r=e.timeStamp,d=!1),10===Math.round(n/1e3)-Math.round(r/1e3)&&(o=((r-c)/1e3).toString()+".."+((n-c)/1e3).toString(),r=n,e.range=o,i("video_engagement",e))},a=function(){n.on("loadstart",function(e){i("player_load",e),d=!0,i("video_impression",e)}),n.on("play",function(e){i("video_view",e)}),n.on("timeupdate",o),n.on("loadeddata",function(){n.play()})},$.extend(g,e),n=this,a()});
